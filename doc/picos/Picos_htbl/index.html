<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Picos_htbl (picos.Picos_htbl)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../';
let search_urls = ['../db.js','../../sherlodoc.js'];
</script><script src="../../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> ‚Äì <a href="../index.html">picos</a> &#x00BB; Picos_htbl</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="üîé Search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Picos_htbl</span></code></h1><p>Lock-free hash table.</p><p>üèéÔ∏è Single key reads with this hash table are actually wait-free rather than just lock-free. Internal resizing automatically uses all the threads that are trying to write to the hash table.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>(!'k, !'v) t</span></span></code></div><div class="spec-doc"><p>Represents a lock-free hash table mapping keys of type <code>'k</code> to values of type <code>'v</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-hashed_type"><a href="#type-hashed_type" class="anchor"></a><code><span><span class="keyword">type</span> <span>'k hashed_type</span></span><span> = <span>(<span class="keyword">module</span> <span class="xref-unresolved">Stdlib</span>.Hashtbl.HashedType <span class="keyword">with</span> <span class="keyword">type</span> <span class="xref-unresolved">t</span> = <span class="type-var">'k</span>)</span></span></code></div><div class="spec-doc"><p>First-class module type abbreviation.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span><span class="optlabel">?hashed_type</span>:<span><span class="type-var">'k</span> <a href="#type-hashed_type">hashed_type</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>create ~hashed_type:(module Key) ()</code> creates a new empty lock-free hash table.</p><p>The optional <code>hashed_type</code> argument can be used to specify the <code>equal</code> and <code>hash</code> operations on keys. Slow polymorphic equality <code>(=)</code> and slow polymorphic <span class="xref-unresolved" title="Stdlib.Hashtbl.hash"><code>hash</code></span> are used by default.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_exn"><a href="#val-find_exn" class="anchor"></a><code><span><span class="keyword">val</span> find_exn : <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'v</span></span></code></div><div class="spec-doc"><p><code>find_exn htbl key</code> returns the current binding of <code>key</code> in the hash table <code>htbl</code> or raises <code>Not_found</code> if no such binding exists.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-try_add"><a href="#val-try_add" class="anchor"></a><code><span><span class="keyword">val</span> try_add : <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>try_add htbl key value</code> tries to add a new binding of <code>key</code> to <code>value</code> to the hash table <code>htbl</code>. Returns <code>true</code> on success and <code>false</code> in case the hash table already contained a binding for <code>key</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-try_remove"><a href="#val-try_remove" class="anchor"></a><code><span><span class="keyword">val</span> try_remove : <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'k</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>try_remove htbl key</code> tries to remove a binding of <code>key</code> from the hash table <code>htbl</code>. Returns <code>true</code> on success and <code>false</code> in case the hash table did not contain a binding for <code>key</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_seq"><a href="#val-to_seq" class="anchor"></a><code><span><span class="keyword">val</span> to_seq : <span><span><span>(<span class="type-var">'k</span>, <span class="type-var">'v</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'k</span> * <span class="type-var">'v</span>)</span> <span class="xref-unresolved">Stdlib</span>.Seq.t</span></span></code></div><div class="spec-doc"><p><code>to_seq htbl</code> takes a snapshot of the bindings in the hash table and returns them as an association sequence.</p><p>üêå This is a linear time operation.</p></div></div></div></body></html>
