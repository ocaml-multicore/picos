<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>index (picos.index)</title><meta charset="utf-8"/><link rel="stylesheet" href="../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../';
let search_urls = ['db.js','../sherlodoc.js'];
</script><script src="../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ picos</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="ðŸ”Ž Search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1 id="picos-â€”-interoperable-effects-based-concurrency"><a href="#picos-â€”-interoperable-effects-based-concurrency" class="anchor"></a>Picos â€” Interoperable effects based concurrency</h1></header><nav class="odoc-toc"><ul><li><a href="#introduction">Introduction</a><ul><li><a href="#interoperability">Interoperability</a><ul><li><a href="#picos-compatible">Picos compatible</a></li><li><a href="#implemented-in-picos">Implemented in Picos</a></li></ul></li><li><a href="#design-goals-and-principles">Design goals and principles</a><ul><li><a href="#constraints-liberate,-liberties-constrain">Constraints Liberate, Liberties Constrain</a></li></ul></li></ul></li><li><a href="#libraries">Libraries</a><ul><li><a href="#core">Core</a></li><li><a href="#sample-schedulers">Sample schedulers</a></li><li><a href="#scheduler-agnostic-libraries">Scheduler agnostic libraries</a></li><li><a href="#auxiliary-libraries">Auxiliary libraries</a></li></ul></li><li><a href="#conventions">Conventions</a></li></ul></nav><div class="odoc-content"><h2 id="introduction"><a href="#introduction" class="anchor"></a>Introduction</h2><p><a href="Picos/index.html"><code>Picos</code></a> is a <a href="https://en.wikipedia.org/wiki/Systems_programming">systems programming</a> interface between effects based schedulers and concurrent abstractions. Picos is designed to enable an ecosystem of <a href="https://en.wikipedia.org/wiki/Interoperability">interoperable</a> elements of <a href="https://v2.ocaml.org/manual/effects.html">effects based</a> <a href="https://en.wikipedia.org/wiki/Cooperative_multitasking">cooperative</a> <a href="https://en.wikipedia.org/wiki/Concurrent_computing">concurrent programming models</a> such as</p><ul><li><a href="https://en.wikipedia.org/wiki/Scheduling_(computing)">schedulers</a> that multiplex large numbers of <a href="https://en.wikipedia.org/wiki/Green_thread">user level fibers</a> to run on a small number of system level threads,</li><li>mechanisms for managing fibers and for <a href="https://en.wikipedia.org/wiki/Structured_concurrency">structuring concurrency</a>,</li><li>communication and synchronization primitives, such as <a href="https://en.wikipedia.org/wiki/Monitor_(synchronization)">mutexes and condition variables</a>, message queues, <a href="https://en.wikipedia.org/wiki/Software_transactional_memory">STMs</a>, and more, and</li><li>integrations with low level <a href="https://en.wikipedia.org/wiki/Asynchronous_I/O">asynchronous IO</a> systems.</li></ul><p>If you are the author of an application level concurrent programming library or framework, then Picos should not fundamentally be competing with your work. However, Picos and libraries built on top of Picos probably do have overlap with your work and making your work Picos compatible may offer benefits:</p><ul><li>You may find it useful that the <a href="Picos/index.html" title="Picos">core</a> of Picos provides parallelism safe building blocks for cancelation, which is a particularly tricky problem to get right.</li><li>You may find it useful that you don't have to reinvent many of the <a href="Picos_sync/index.html" title="Picos_sync">basic communication and synchronization abstractions</a> such as mutexes and condition variables, promises, concurrent bounded queues, channels, and what not.</li><li>You may benefit from further non-trivial libraries, such as <a href="Picos_stdio/index.html" title="Picos_stdio">IO libraries</a>, that you don't have to reimplement.</li><li>Potential users of your work may be reassured and benefit from the ability to mix-and-match your work with other Picos compatible libraries and frameworks.</li></ul><p>Of course, interoperability does have some costs. It takes time to understand Picos and it takes time to implement Picos compatibility. Implementing your programming model elements in terms of the Picos interface may not always give ideal results. To address concerns such as those, a conscious effort has been made to keep Picos as minimal and unopinionated as possible.</p><h3 id="interoperability"><a href="#interoperability" class="anchor"></a>Interoperability</h3><p>Picos is essentially an interface between schedulers and concurrent abstractions. Two phrases, <i>Picos compatible</i> and <i>Implemented in Picos</i>, are used to describe the opposing sides of this contract.</p><h4 id="picos-compatible"><a href="#picos-compatible" class="anchor"></a>Picos compatible</h4><p>The idea is that schedulers provide their own handlers for the Picos effects. By handling the Picos effects a scheduler allows any libraries built on top of the Picos interface to be used with the scheduler. Such a scheduler is then said to be <i>Picos compatible</i>.</p><h4 id="implemented-in-picos"><a href="#implemented-in-picos" class="anchor"></a>Implemented in Picos</h4><p>A scheduler is just one element of a concurrent programming model. Separately from making a scheduler Picos compatible, one may choose to implement other elements of the programming model, e.g. a particular approach to structuring concurrency or a particular collection of communication and synchronization primitives, in terms of the Picos interface. Such scheduler agnostic elements can then be used on any Picos compatible scheduler and are said to be <i>Implemented in Picos</i>.</p><h3 id="design-goals-and-principles"><a href="#design-goals-and-principles" class="anchor"></a>Design goals and principles</h3><p>The <a href="Picos/index.html" title="Picos">core</a> of Picos is designed and developed with various goals and principles in mind.</p><ul><li><b>Simple</b>: Picos should be kept as simple as possible.</li><li><b>Minimal</b>: Picos should be kept minimal. The dependency footprint should be as small as possible. Convenience features should be built on top of the interface.</li><li><b>Safe</b>: Picos should be designed with safety in mind. The implementation must be data race free. The interface should promote and always allow proper resource management.</li><li><b>Unopinionated</b>: Picos should not make strong design choices that are controversial.</li><li><b>Flexible</b>: Picos should allow higher level libraries as much freedom as possible to make their own design choices.</li></ul><p>The documentation of the <a href="Picos/index.html" title="Picos">concepts</a> includes design rationale for some of the specific ideas behind their detailed design.</p><h4 id="constraints-liberate,-liberties-constrain"><a href="#constraints-liberate,-liberties-constrain" class="anchor"></a>Constraints Liberate, Liberties Constrain</h4><p>Picos aims to be unopinionated and flexible enough to allow higher level libraries to provide many different kinds of concurrent programming models. While it is impossible to give a complete list of what Picos does not dictate, it is perhaps illuminating to explicitly mention some of those:</p><ul><li>Picos does not implement <a href="https://en.wikipedia.org/wiki/Capability-based_security">capability-based security</a>. Higher level libraries with or without capabilities may be built on top of Picos.</li><li>Picos never cancels computations implicitly. Higher level libraries may decide when cancelation should be allowed to take effect.</li><li>Picos does not dictate which fiber should be scheduled next after a Picos effect. Different schedulers may freely use desired data structures (queues, work-stealing deques, stacks, priority queues, ...) and, after handling any Picos effect, freely decide which fiber to run next.</li><li>Picos does not dictate how fibers should be managed. It is possible to implement both unstructured and structured concurrent programming models on top of Picos.</li><li>Picos does not dictate which mechanisms applications should use for communication and synchronization. It is possible to build many different kinds of communication and synchronization mechanisms on top of Picos including mutexes and condition variables, STMs, asynchronous and synchronous message passing, <a href="https://en.wikipedia.org/wiki/Actor_model">actors</a>, and more.</li><li>Picos does not dictate that there should be a connection between the scheduler and other elements of the concurrent programming model. It is possible to provide those separately and mix-and-match.</li><li>Picos does not dictate which library to use for IO. It is possible to build direct-style asynchronous IO libraries on top of Picos that can then be used with any Picos compatible schedulers or concurrent programming models.</li></ul><p>Let's build an incredible ecosystem of interoperable concurrent programming libraries and frameworks!</p><h2 id="libraries"><a href="#libraries" class="anchor"></a>Libraries</h2><p>The Picos package is divided into multiple libraries.</p><h3 id="core"><a href="#core" class="anchor"></a>Core</h3><p>The only essential part of the package is the core interface.</p><ul class="modules"><li><a href="Picos/index.html"><code>Picos</code></a> <span class="synopsis">A <a href="https://en.wikipedia.org/wiki/Systems_programming">systems programming</a> interface between effects based schedulers and concurrent abstractions.</span></li></ul><p><sup>Everything else is entirely opt-in and you are free to mix-and-match with any other Picos compatible schedulers and libraries implemented in Picos or develop your own.</sup></p><h3 id="sample-schedulers"><a href="#sample-schedulers" class="anchor"></a>Sample schedulers</h3><p>These are minimalistic, but fully-functioning, schedulers provided as samples.</p><ul class="modules"><li><a href="Picos_fifos/index.html"><code>Picos_fifos</code></a> <span class="synopsis">Basic single-threaded effects based <a href="Picos/index.html"><code>Picos</code></a> compatible scheduler for OCaml 5.</span></li><li><a href="Picos_lwt/index.html"><code>Picos_lwt</code></a> <span class="synopsis">Direct style <a href="Picos/index.html"><code>Picos</code></a> compatible interface to <code>Lwt</code> for OCaml 5.</span></li><li><a href="Picos_lwt_unix/index.html"><code>Picos_lwt_unix</code></a> <span class="synopsis">Direct style <a href="Picos/index.html"><code>Picos</code></a> compatible interface to <code>Lwt</code> with <code>Lwt_unix</code> for OCaml 5.</span></li><li><a href="Picos_randos/index.html"><code>Picos_randos</code></a> <span class="synopsis">Randomized multi-threaded effects based <a href="Picos/index.html"><code>Picos</code></a> compatible scheduler for OCaml 5.</span></li><li><a href="Picos_threaded/index.html"><code>Picos_threaded</code></a> <span class="synopsis">Basic <code>Thread</code> based <a href="Picos/index.html"><code>Picos</code></a> compatible scheduler for OCaml 4.</span></li></ul><p><sup>You may find these useful for both understanding the core Picos interface and for testing your own libraries implemented in Picos.</sup></p><h3 id="scheduler-agnostic-libraries"><a href="#scheduler-agnostic-libraries" class="anchor"></a>Scheduler agnostic libraries</h3><p>These are examples of libraries implemented in Picos.</p><ul class="modules"><li><a href="Picos_structured/index.html"><code>Picos_structured</code></a> <span class="synopsis">Basic structured concurrency primitives for <a href="Picos/index.html"><code>Picos</code></a>.</span></li><li><a href="Picos_sync/index.html"><code>Picos_sync</code></a> <span class="synopsis">Basic communication and synchronization primitives for <a href="Picos/index.html"><code>Picos</code></a>.</span></li><li><a href="Picos_stdio/index.html"><code>Picos_stdio</code></a> <span class="synopsis">Basic IO facilities based on OCaml standard libraries for <a href="Picos/index.html"><code>Picos</code></a>.</span></li><li><a href="Picos_select/index.html"><code>Picos_select</code></a> <span class="synopsis">Basic <code>Unix.select</code> based IO event loop for <a href="Picos/index.html"><code>Picos</code></a>.</span></li></ul><p><sup>The IO libraries in this package are built only on top of the standard libraries distributed with OCaml and are hopefully useful for building simple applications. Bindings to asynchronous system IO libraries are outside the scope of this package.</sup></p><h3 id="auxiliary-libraries"><a href="#auxiliary-libraries" class="anchor"></a>Auxiliary libraries</h3><p>These have no dependency to the core <a href="Picos/index.html"><code>Picos</code></a> interface and are used in the implementation of the other libraries.</p><ul class="modules"><li><a href="Picos_domain/index.html"><code>Picos_domain</code></a> <span class="synopsis">Minimalistic domain API available both on OCaml 5 and on OCaml 4.</span></li><li><a href="Picos_exn_bt/index.html"><code>Picos_exn_bt</code></a> <span class="synopsis">Wrapper for exceptions with backtraces.</span></li><li><a href="Picos_fd/index.html"><code>Picos_fd</code></a> <span class="synopsis">Externally reference counted <span class="xref-unresolved" title="Unix.file_descr">file descriptors</span>.</span></li><li><a href="Picos_htbl/index.html"><code>Picos_htbl</code></a> <span class="synopsis">Lock-free hash table.</span></li><li><a href="Picos_mpscq/index.html"><code>Picos_mpscq</code></a> <span class="synopsis">Lock-free multi-producer, single-consumer queue.</span></li><li><a href="Picos_rc/index.html"><code>Picos_rc</code></a> <span class="synopsis">External reference counting tables for <span class="xref-unresolved" title="Resource">disposable resources</span>.</span></li><li><a href="Picos_thread/index.html"><code>Picos_thread</code></a> <span class="synopsis">Minimalistic thread API available with or without <code>threads.posix</code>.</span></li></ul><p><sup>Some of these libraries might be moved to other packages in the future.</sup></p><h2 id="conventions"><a href="#conventions" class="anchor"></a>Conventions</h2><p>Many operation in the Picos libraries use <a href="https://en.wikipedia.org/wiki/Non-blocking_algorithm">non-blocking</a> algorithms. Unless explicitly specified otherwise,</p><ul><li>non-blocking operations in Picos are <i>atomic</i> or <i>strictly linearizable</i> (i.e. <a href="https://en.wikipedia.org/wiki/Linearizability">linearizable</a> and <a href="https://en.wikipedia.org/wiki/Database_transaction_schedule#Serializable">serializable</a>), and</li><li><a href="https://en.wikipedia.org/wiki/Non-blocking_algorithm#Lock-freedom">lock-free</a> operations in Picos are designed to avoid having competing operations of widely different complexities, which should make such operations much less prone to starvation.</li></ul></div></body></html>
